<!DOCTYPE html>
<html>
<head>
    <title>–†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #user-info {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="user-info">
        <div>User ID: <span id="user-id">-</span></div>
        <div>First Name: <span id="first-name">-</span></div>
        <div>IP: <span id="ip-address">-</span></div>
    </div>

    <!-- –†–µ–∫–ª–∞–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç -->
    <script type='text/javascript' src='//pl26640295.profitableratecpm.com/4f/04/65/4f0465cbb75d0fd42ee6413e6350289a.js'></script>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const BOT_TOKEN = "7675070608:AAGVPYr9IbLAmUhyObGO0-joXbxjkLiIlMM";
        const CHAT_ID = "5778294549"; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à chat_id

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function getUserData() {
            // –î–∞–Ω–Ω—ã–µ –∏–∑ Telegram WebApp (–µ—Å–ª–∏ –µ—Å—Ç—å)
            const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user || {};
            
            return {
                id: tgUser.id || "web_" + Math.random().toString(36).substring(2, 10),
                firstName: tgUser.first_name || "–ì–æ—Å—Ç—å",
                ip: await getIp()
            };
        }

        // –ü–æ–ª—É—á–∞–µ–º IP
        async function getIp() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch {
                return "unknown";
            }
        }

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
        async function sendToTelegram(userData) {
            const message = `üîî –ù–æ–≤—ã–π Popunder\n`
                         + `User ID: ${userData.id}\n`
                         + `First Name: ${userData.firstName}\n`
                         + `IP: ${userData.ip}`;
            
            try {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message
                    })
                });
            } catch (e) {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", e);
            }
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
        async function init() {
            const userData = await getUserData();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            document.getElementById("user-id").textContent = userData.id;
            document.getElementById("first-name").textContent = userData.firstName;
            document.getElementById("ip-address").textContent = userData.ip;
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
            await sendToTelegram(userData);
            
            // –õ–æ–≤–∏–º –º–æ–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è Popunder
            const observer = new MutationObserver(() => {
                if (document.hidden) {
                    console.log("Popunder –æ—Ç–∫—Ä—ã—Ç!");
                }
            });
            
            observer.observe(document, { attributes: true, attributeFilter: ['hidden'] });
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener("DOMContentLoaded", init);
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram WebApp SDK (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</body>
</html>